import{j as e,r as x}from"./react-vendor-C7OGPxf-.js";import{a as g}from"./adminAPI-DETaF7HS.js";import{a9 as j,B as a,d as s,v as c,a as v,_ as p,ab as n,a7 as w,h as _,y as C,R as W}from"./mui-vendor-Cgz2Gown.js";import"./vendor-C6eT50bt.js";import"./api-DFHi_IMI.js";import"./utils-vendor-B9ygI19o.js";function h({title:r,value:l,icon:m,color:d="primary"}){return e.jsxs(j,{sx:{p:3,display:"flex",flexDirection:"column",height:"100%",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsx(s,{variant:"h6",color:"text.secondary",fontWeight:"medium",children:r}),e.jsx(a,{sx:{color:`${d}.main`,display:"flex",alignItems:"center"},children:m})]}),e.jsx(s,{variant:"h3",component:"div",fontWeight:"bold",color:`${d}.main`,children:typeof l=="number"?l.toLocaleString():l})]})}function A(){const[r,l]=x.useState(null),[m,d]=x.useState(!0),[u,f]=x.useState(null);x.useEffect(()=>{y()},[]);const y=async()=>{var t,o;try{d(!0),f(null),console.log("Loading dashboard stats...");const i=await g.getDashboardStats();console.log("Dashboard stats loaded:",i),l(i)}catch(i){console.error("Dashboard stats error:",i),console.error("Error response:",i.response);const b=((o=(t=i.response)==null?void 0:t.data)==null?void 0:o.detail)||i.message||"Failed to load dashboard stats";f(b)}finally{d(!1)}};return m?e.jsx(c,{maxWidth:"xl",children:e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:e.jsx(v,{})})}):u?e.jsx(c,{maxWidth:"xl",children:e.jsxs(p,{severity:"error",sx:{mt:2},children:[u,e.jsxs(a,{sx:{mt:2},children:[e.jsx(s,{variant:"body2",children:"Please check:"}),e.jsx(s,{variant:"body2",children:"1. You are logged in as an admin user"}),e.jsx(s,{variant:"body2",children:"2. The backend API is running"}),e.jsx(s,{variant:"body2",children:"3. Check browser console for more details"})]})]})}):r?e.jsxs(c,{maxWidth:"lg",children:[e.jsx(s,{variant:"h4",component:"h1",gutterBottom:!0,fontWeight:"bold",children:"Dashboard"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:4},children:"Overview of your system"}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{title:"Total Users",value:r.total_users,icon:e.jsx(w,{}),color:"primary"})}),e.jsx(n,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{title:"Active Users",value:r.active_users,icon:e.jsx(_,{}),color:"success"})}),e.jsx(n,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{title:"New Today",value:r.new_users_today,icon:e.jsx(C,{}),color:"info"})}),e.jsx(n,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{title:"New This Week",value:r.new_users_this_week,icon:e.jsx(W,{}),color:"warning"})}),e.jsx(n,{size:{xs:12,md:6},sx:{display:"flex"},children:e.jsxs(j,{sx:{p:3,display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Users by Type"}),e.jsx(a,{sx:{mt:2,flexGrow:1},children:Object.entries(r.users_by_type).map(([t,o])=>e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",textTransform:"capitalize",children:t}),e.jsx(s,{variant:"body2",fontWeight:"bold",children:o})]},t))})]})}),e.jsx(n,{size:{xs:12,md:6},sx:{display:"flex"},children:e.jsxs(j,{sx:{p:3,display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Users by Role"}),e.jsx(a,{sx:{mt:2,flexGrow:1},children:Object.entries(r.users_by_role).map(([t,o])=>e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",textTransform:"capitalize",children:t}),e.jsx(s,{variant:"body2",fontWeight:"bold",children:o})]},t))})]})})]})]}):e.jsx(c,{maxWidth:"xl",children:e.jsx(p,{severity:"warning",sx:{mt:2},children:"No statistics data available"})})}export{A as default};

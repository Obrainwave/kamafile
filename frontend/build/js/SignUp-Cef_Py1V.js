import{u as D,r as c,j as e,L as f}from"./react-vendor-CJSarQ9f.js";import{H as N}from"./Header-CkcGtpBv.js";import{a as T}from"./api-DT-DgYzl.js";import{B as i,v as W,F as E,G as F,y as q,d as r,_ as B,m as _,k as x,$ as j,I as w,a0 as b,a1 as v,a2 as z,a3 as L,i as H,a as J}from"./mui-vendor-CUsFfAzq.js";import"./vendor-Bo3UNITv.js";import"./utils-vendor-D5lHaTRS.js";function U(){const C=D(),[h,P]=c.useState(!1),[p,S]=c.useState(!1),[g,o]=c.useState(!1),[t,A]=c.useState({fullName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1}),[y,s]=c.useState(""),l=n=>{const m=n.target.type==="checkbox"?n.target.checked:n.target.value;A({...t,[n.target.name]:m}),s("")},k=async n=>{var m;if(n.preventDefault(),s(""),o(!0),!t.fullName||!t.email||!t.password||!t.confirmPassword){s("Please fill in all fields"),o(!1);return}if(t.password!==t.confirmPassword){s("Passwords do not match"),o(!1);return}if(t.password.length<8){s("Password must be at least 8 characters long"),o(!1);return}if(!t.acceptTerms){s("Please accept the terms and conditions"),o(!1);return}try{const d=await T.signup({email:t.email,full_name:t.fullName,password:t.password,confirm_password:t.confirmPassword});localStorage.setItem("access_token",d.access_token),localStorage.setItem("user",JSON.stringify(d.user)),window.dispatchEvent(new CustomEvent("auth-change")),C("/")}catch(d){let u="An error occurred. Please try again.";if((m=d.response)!=null&&m.data){const a=d.response.data;Array.isArray(a.detail)?u=a.detail.map(I=>I.msg).join(", "):typeof a.detail=="string"?u=a.detail:a.detail&&typeof a.detail=="object"&&(u=a.detail.msg||a.detail.message||JSON.stringify(a.detail))}s(u)}finally{o(!1)}};return e.jsxs(i,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",bgcolor:"background.default"},children:[e.jsx(N,{}),e.jsx(i,{sx:{flex:1,display:"flex",alignItems:"center",py:4},children:e.jsx(W,{maxWidth:"sm",children:e.jsx(E,{elevation:3,children:e.jsxs(F,{sx:{p:4},children:[e.jsxs(i,{sx:{textAlign:"center",mb:4},children:[e.jsx(i,{sx:{width:64,height:64,borderRadius:"50%",bgcolor:"secondary.main",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2},children:e.jsx(q,{sx:{fontSize:32,color:"white"}})}),e.jsx(r,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:700},children:"Create Account"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Join Kamafile and simplify your taxes"})]}),y&&e.jsx(B,{severity:"error",sx:{mb:3},children:y}),e.jsx(i,{component:"form",onSubmit:k,children:e.jsxs(_,{spacing:3,children:[e.jsx(x,{fullWidth:!0,label:"Full Name",name:"fullName",type:"text",value:t.fullName,onChange:l,required:!0,autoComplete:"name",autoFocus:!0}),e.jsx(x,{fullWidth:!0,label:"Email address",name:"email",type:"email",value:t.email,onChange:l,required:!0,autoComplete:"email"}),e.jsx(x,{fullWidth:!0,label:"Password",name:"password",type:h?"text":"password",value:t.password,onChange:l,required:!0,autoComplete:"new-password",helperText:"Must be at least 8 characters",InputProps:{endAdornment:e.jsx(j,{position:"end",children:e.jsx(w,{onClick:()=>P(!h),edge:"end",children:h?e.jsx(b,{}):e.jsx(v,{})})})}}),e.jsx(x,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",type:p?"text":"password",value:t.confirmPassword,onChange:l,required:!0,autoComplete:"new-password",InputProps:{endAdornment:e.jsx(j,{position:"end",children:e.jsx(w,{onClick:()=>S(!p),edge:"end",children:p?e.jsx(b,{}):e.jsx(v,{})})})}}),e.jsx(z,{control:e.jsx(L,{name:"acceptTerms",checked:t.acceptTerms,onChange:l,required:!0}),label:e.jsxs(r,{variant:"body2",children:["I agree to the"," ",e.jsx(f,{to:"/terms",style:{textDecoration:"none",color:"inherit"},children:e.jsx(r,{component:"span",variant:"body2",color:"primary",sx:{"&:hover":{textDecoration:"underline"}},children:"Terms and Conditions"})})," ","and"," ",e.jsx(f,{to:"/privacy",style:{textDecoration:"none",color:"inherit"},children:e.jsx(r,{component:"span",variant:"body2",color:"primary",sx:{"&:hover":{textDecoration:"underline"}},children:"Privacy Policy"})})]})}),e.jsx(H,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:g,sx:{bgcolor:"secondary.main",py:1.5,fontSize:"1rem","&:hover":{bgcolor:"secondary.dark"}},children:g?e.jsx(J,{size:24,color:"inherit"}):"Create Account"}),e.jsx(i,{sx:{textAlign:"center",mt:2},children:e.jsxs(r,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",e.jsx(f,{to:"/signin",style:{textDecoration:"none",color:"inherit"},children:e.jsx(r,{component:"span",variant:"body2",color:"primary",sx:{fontWeight:600,"&:hover":{textDecoration:"underline"}},children:"Sign in"})})]})})]})})]})})})})]})}export{U as default};

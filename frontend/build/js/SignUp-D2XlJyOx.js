import{u as C,r as n,j as e,L as p,S}from"./index-CtZe0orJ.js";import{H as k}from"./Header-Axgyt5bx.js";import{a as A}from"./api-sa1Artjr.js";import{B as E}from"./Button-DSgQr6FG.js";import{I as h}from"./Input-DCDiL-_I.js";import{C as T,a as F}from"./Container-B1p7Csts.js";import{A as I}from"./Alert-DEvzc-ke.js";import{U as q}from"./user-plus-C-B5qNsN.js";import{E as g,a as y}from"./eye-pWNRRIMt.js";import"./DropdownItem-DL29CmMt.js";import"./menu-BZlBs3Vk.js";import"./createLucideIcon-BzLNr2Zq.js";import"./x-kfxjC3rr.js";import"./circle-check-big-BXrFS2Xy.js";function Q(){const w=C(),[d,j]=n.useState(!1),[u,N]=n.useState(!1),[x,t]=n.useState(!1),[s,b]=n.useState({fullName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1}),[f,r]=n.useState(""),l=o=>{const m=o.target.type==="checkbox"?o.target.checked:o.target.value;b({...s,[o.target.name]:m}),r("")},v=async o=>{var m;if(o.preventDefault(),r(""),t(!0),!s.fullName||!s.email||!s.password||!s.confirmPassword){r("Please fill in all fields"),t(!1);return}if(s.password!==s.confirmPassword){r("Passwords do not match"),t(!1);return}if(s.password.length<8){r("Password must be at least 8 characters long"),t(!1);return}if(!s.acceptTerms){r("Please accept the terms and conditions"),t(!1);return}try{const i=await A.signup({email:s.email,full_name:s.fullName,password:s.password,confirm_password:s.confirmPassword});localStorage.setItem("access_token",i.access_token),localStorage.setItem("user",JSON.stringify(i.user)),window.dispatchEvent(new CustomEvent("auth-change")),w("/")}catch(i){let c="An error occurred. Please try again.";if((m=i.response)!=null&&m.data){const a=i.response.data;Array.isArray(a.detail)?c=a.detail.map(P=>P.msg).join(", "):typeof a.detail=="string"?c=a.detail:a.detail&&typeof a.detail=="object"&&(c=a.detail.msg||a.detail.message||JSON.stringify(a.detail))}r(c)}finally{t(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[e.jsx(k,{}),e.jsx("div",{className:"flex-1 flex items-center py-16",children:e.jsx(T,{maxWidth:"sm",children:e.jsxs(F,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-secondary flex items-center justify-center mx-auto mb-4",children:e.jsx(q,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Create Account"}),e.jsx("p",{className:"text-gray-600",children:"Join Kamafile and simplify your taxes"})]}),f&&e.jsx("div",{className:"mb-6",children:e.jsx(I,{severity:"error",children:f})}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsx(h,{label:"Full Name",name:"fullName",type:"text",value:s.fullName,onChange:l,required:!0,autoComplete:"name",autoFocus:!0}),e.jsx(h,{label:"Email address",name:"email",type:"email",value:s.email,onChange:l,required:!0,autoComplete:"email"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:d?"text":"password",value:s.password,onChange:l,required:!0,autoComplete:"new-password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition pr-12"}),e.jsx("button",{type:"button",onClick:()=>j(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?e.jsx(g,{className:"w-5 h-5"}):e.jsx(y,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Must be at least 8 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:u?"text":"password",value:s.confirmPassword,onChange:l,required:!0,autoComplete:"new-password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition pr-12"}),e.jsx("button",{type:"button",onClick:()=>N(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?e.jsx(g,{className:"w-5 h-5"}):e.jsx(y,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"acceptTerms",name:"acceptTerms",type:"checkbox",checked:s.acceptTerms,onChange:l,required:!0,className:"mt-1 h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"}),e.jsxs("label",{htmlFor:"acceptTerms",className:"ml-3 text-sm text-gray-700",children:["I agree to the"," ",e.jsx(p,{to:"/terms",className:"text-primary hover:underline",children:"Terms and Conditions"})," ","and"," ",e.jsx(p,{to:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"})]})]}),e.jsx(E,{type:"submit",fullWidth:!0,variant:"secondary",size:"lg",disabled:x,children:x?e.jsx(S,{size:"sm",className:"mx-auto"}):"Create Account"}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(p,{to:"/signin",className:"font-semibold text-primary hover:underline",children:"Sign in"})]})})]})]})})})]})}export{Q as default};

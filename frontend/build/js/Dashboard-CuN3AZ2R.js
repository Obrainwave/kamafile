import{j as e,r as x}from"./react-vendor-CJSarQ9f.js";import{a as g}from"./adminAPI-CM_It6tR.js";import{a9 as j,B as i,d as s,v as c,a as v,_ as y,ab as a,a7 as w,h as _,y as C,R as W}from"./mui-vendor-CUsFfAzq.js";import"./vendor-Bo3UNITv.js";import"./api-DT-DgYzl.js";import"./utils-vendor-D5lHaTRS.js";function h({title:t,value:o,icon:m,color:l="primary"}){return e.jsxs(j,{sx:{p:3,display:"flex",flexDirection:"column",height:"100%",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsx(s,{variant:"h6",color:"text.secondary",fontWeight:"medium",children:t}),e.jsx(i,{sx:{color:`${l}.main`,display:"flex",alignItems:"center"},children:m})]}),e.jsx(s,{variant:"h3",component:"div",fontWeight:"bold",color:`${l}.main`,children:typeof o=="number"?o.toLocaleString():o})]})}function D(){const[t,o]=x.useState(null),[m,l]=x.useState(!0),[u,f]=x.useState(null);x.useEffect(()=>{p()},[]);const p=async()=>{var r,n;try{l(!0),f(null);const d=await g.getDashboardStats();o(d)}catch(d){const b=((n=(r=d.response)==null?void 0:r.data)==null?void 0:n.detail)||d.message||"Failed to load dashboard stats";f(b)}finally{l(!1)}};return m?e.jsx(c,{maxWidth:"xl",children:e.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:e.jsx(v,{})})}):u?e.jsx(c,{maxWidth:"xl",children:e.jsxs(y,{severity:"error",sx:{mt:2},children:[u,e.jsxs(i,{sx:{mt:2},children:[e.jsx(s,{variant:"body2",children:"Please check:"}),e.jsx(s,{variant:"body2",children:"1. You are logged in as an admin user"}),e.jsx(s,{variant:"body2",children:"2. The backend API is running"}),e.jsx(s,{variant:"body2",children:"3. Check browser console for more details"})]})]})}):t?e.jsxs(c,{maxWidth:"lg",children:[e.jsx(s,{variant:"h4",component:"h1",gutterBottom:!0,fontWeight:"bold",children:"Dashboard"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:4},children:"Overview of your system"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{title:"Total Users",value:t.total_users,icon:e.jsx(w,{}),color:"primary"})}),e.jsx(a,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{title:"Active Users",value:t.active_users,icon:e.jsx(_,{}),color:"success"})}),e.jsx(a,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{title:"New Today",value:t.new_users_today,icon:e.jsx(C,{}),color:"info"})}),e.jsx(a,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{title:"New This Week",value:t.new_users_this_week,icon:e.jsx(W,{}),color:"warning"})}),e.jsx(a,{size:{xs:12,md:6},sx:{display:"flex"},children:e.jsxs(j,{sx:{p:3,display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Users by Type"}),e.jsx(i,{sx:{mt:2,flexGrow:1},children:Object.entries(t.users_by_type).map(([r,n])=>e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",textTransform:"capitalize",children:r}),e.jsx(s,{variant:"body2",fontWeight:"bold",children:n})]},r))})]})}),e.jsx(a,{size:{xs:12,md:6},sx:{display:"flex"},children:e.jsxs(j,{sx:{p:3,display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Users by Role"}),e.jsx(i,{sx:{mt:2,flexGrow:1},children:Object.entries(t.users_by_role).map(([r,n])=>e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",textTransform:"capitalize",children:r}),e.jsx(s,{variant:"body2",fontWeight:"bold",children:n})]},r))})]})})]})]}):e.jsx(c,{maxWidth:"xl",children:e.jsx(y,{severity:"warning",sx:{mt:2},children:"No statistics data available"})})}export{D as default};

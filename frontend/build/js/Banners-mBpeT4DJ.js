import{r as l,j as e,S as M}from"./index-ozb2rjOE.js";import{a as c}from"./adminAPI-KGAfRyo2.js";import{C as k,a as q}from"./Container-CTBe46Zr.js";import{A as P}from"./Alert-DRc9tl0R.js";import{B as y}from"./Button-Cd51FRts.js";import{M as T}from"./Modal-DyuQ-vDy.js";import{I as j}from"./Input-BVlPsKUN.js";import{P as L}from"./plus-Bu3CVSWI.js";import{c as B}from"./createLucideIcon-D-ZStHbC.js";import{S as U}from"./square-pen-ERrzQS-2.js";import{T as z}from"./trash-2-DJvGeV9k.js";import"./api-sa1Artjr.js";import"./circle-check-big-DyHo94cP.js";import"./x-BusEZ7ZQ.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],W=B("arrow-down",R);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],V=B("arrow-up",$);function ne(){const[i,S]=l.useState([]),[A,f]=l.useState(!0),[w,d]=l.useState(null),[I,N]=l.useState(!1),[x,u]=l.useState(null),[a,n]=l.useState({title:"",description:"",image_url:"",order:0,is_active:!0});l.useEffect(()=>{m()},[]);const m=async()=>{var t,r;try{f(!0),d(null);const s=await c.getBanners();S(s)}catch(s){d(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.detail)||"Failed to load banners")}finally{f(!1)}},v=t=>{t?(u(t),n({title:t.title,description:t.description||"",image_url:t.image_url||"",order:t.order,is_active:t.is_active})):(u(null),n({title:"",description:"",image_url:"",order:i.length,is_active:!0})),N(!0)},g=()=>{N(!1),u(null),n({title:"",description:"",image_url:"",order:0,is_active:!0})},D=async()=>{var t,r;try{x?await c.updateBanner(x.id,a):await c.createBanner(a),g(),m()}catch(s){d(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.detail)||"Failed to save banner")}},O=async t=>{var r,s;if(window.confirm("Are you sure you want to delete this banner?"))try{await c.deleteBanner(t),m()}catch(p){d(((s=(r=p.response)==null?void 0:r.data)==null?void 0:s.detail)||"Failed to delete banner")}},b=async(t,r)=>{var C,_;const s=i.find(o=>o.id===t);if(!s)return;const p=i.findIndex(o=>o.id===t),h=r==="up"?p-1:p+1;if(h<0||h>=i.length)return;const E=i[h].order,F=s.order;try{await c.updateBanner(t,{order:E}),await c.updateBanner(i[h].id,{order:F}),m()}catch(o){d(((_=(C=o.response)==null?void 0:C.data)==null?void 0:_.detail)||"Failed to update order")}};return A?e.jsx(k,{maxWidth:"xl",children:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(M,{size:"lg"})})}):e.jsxs(k,{maxWidth:"xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Banner Management"}),e.jsxs(y,{variant:"primary",onClick:()=>v(),className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Add Banner"]})]}),w&&e.jsx(P,{severity:"error",className:"mb-4",onClose:()=>d(null),children:w}),e.jsx(q,{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[i.map((t,r)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(t.id,"up"),disabled:r===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm",children:t.order}),e.jsx("button",{onClick:()=>b(t.id,"down"),disabled:r===i.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(W,{className:"w-4 h-4"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.image_url?e.jsx("img",{src:t.image_url,alt:t.title,className:"w-16 h-10 object-cover rounded"}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${t.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>v(t),className:"p-1 text-primary hover:text-primary-dark",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>O(t.id),className:"p-1 text-red-600 hover:text-red-700",children:e.jsx(z,{className:"w-5 h-5"})})]})})]},t.id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No banners found. Create your first banner to get started."})})]})]})})}),e.jsx(T,{open:I,onClose:g,title:x?"Edit Banner":"Create Banner",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{label:"Title",required:!0,value:a.title,onChange:t=>n({...a,title:t.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{rows:4,value:a.description,onChange:t=>n({...a,description:t.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition"})]}),e.jsx(j,{label:"Image URL",value:a.image_url,onChange:t=>n({...a,image_url:t.target.value}),placeholder:"https://example.com/image.jpg"}),e.jsx(j,{label:"Order",type:"number",value:a.order,onChange:t=>n({...a,order:parseInt(t.target.value)||0})}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.is_active,onChange:t=>n({...a,is_active:t.target.checked}),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(y,{variant:"outline",onClick:g,children:"Cancel"}),e.jsx(y,{variant:"primary",onClick:D,disabled:!a.title,children:x?"Update":"Create"})]})]})})]})}export{ne as default};

import{r as l,u as j,a as y,j as e,S as N,O as w}from"./index-BctExgi5.js";import{a as g}from"./api-Bu1cG_4Q.js";import{D as v,a as f}from"./DropdownItem-Cbq286dJ.js";import{a as k,M as A,C,L}from"./menu-BBtL1WiB.js";import{U as M}from"./users-Cu3rEyhd.js";import{c as b}from"./createLucideIcon-DH5Z8aYF.js";import{F as S}from"./file-text-CBBRENU_.js";import{B as U}from"./bot-Bgu9ODd2.js";import{X as I}from"./x-ouKM2NnA.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],z=b("chart-column",_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],O=b("settings",D);function E(){const[o,n]=l.useState(null),[d,m]=l.useState(!0),[s,h]=l.useState(!1),a=j();l.useEffect(()=>{x()},[]);const x=async()=>{try{const i=await g.getCurrentUser();n(i);const t=["admin","super_admin","moderator","support"];i.role&&t.includes(i.role)?h(!0):a("/")}catch{a("/signin")}finally{m(!1)}};return{user:o,loading:d,isAdmin:s}}const u=[{text:"Dashboard",icon:k,path:"/admin"},{text:"Users",icon:M,path:"/admin/users"},{text:"Analytics",icon:z,path:"/admin/analytics"},{text:"Content",icon:S,path:"/admin/content"},{text:"RAG Management",icon:U,path:"/admin/rag"},{text:"Settings",icon:O,path:"/admin/settings"}];function X(){const o=j(),n=y(),{loading:d,isAdmin:m,user:s}=E(),[h,a]=l.useState(!1),x=async()=>{try{await g.logout(),o("/signin")}catch{}};if(d)return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(N,{size:"lg"})});if(!m)return null;const i=()=>{var t,r,c,p;return((r=(t=s==null?void 0:s.full_name)==null?void 0:t[0])==null?void 0:r.toUpperCase())||((p=(c=s==null?void 0:s.email)==null?void 0:c[0])==null?void 0:p.toUpperCase())||"A"};return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsxs("aside",{className:"hidden md:block fixed left-0 top-0 h-full w-60 bg-primary-dark text-white z-30",children:[e.jsx("div",{className:"h-16 flex items-center px-6 border-b border-white/10",children:e.jsx("h2",{className:"text-lg font-bold",children:"Admin Panel"})}),e.jsx("nav",{className:"py-4",children:u.map(t=>{const r=t.icon,c=n.pathname===t.path||t.path!=="/admin"&&n.pathname.startsWith(t.path);return e.jsxs("button",{onClick:()=>o(t.path),className:`w-full flex items-center gap-3 px-6 py-3 text-left transition ${c?"bg-primary text-white":"text-white/70 hover:bg-white/10 hover:text-white"}`,children:[e.jsx(r,{className:"w-5 h-5"}),e.jsx("span",{children:t.text})]},t.text)})})]}),h&&e.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>a(!1)}),e.jsxs("div",{className:"fixed left-0 top-0 h-full w-60 bg-primary-dark text-white",children:[e.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-white/10",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Admin Panel"}),e.jsx("button",{onClick:()=>a(!1),className:"text-white",children:e.jsx(I,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"py-4",children:u.map(t=>{const r=t.icon,c=n.pathname===t.path||t.path!=="/admin"&&n.pathname.startsWith(t.path);return e.jsxs("button",{onClick:()=>{o(t.path),a(!1)},className:`w-full flex items-center gap-3 px-6 py-3 text-left transition ${c?"bg-primary text-white":"text-white/70 hover:bg-white/10 hover:text-white"}`,children:[e.jsx(r,{className:"w-5 h-5"}),e.jsx("span",{children:t.text})]},t.text)})})]})]}),e.jsxs("div",{className:"flex-1 md:ml-60",children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b border-gray-200 shadow-sm",children:e.jsxs("div",{className:"h-16 flex items-center justify-between px-4 md:px-6",children:[e.jsx("button",{onClick:()=>a(!0),className:"md:hidden p-2 text-gray-700",children:e.jsx(A,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"hidden sm:block text-sm text-gray-600",children:(s==null?void 0:s.full_name)||(s==null?void 0:s.email)}),e.jsxs(v,{trigger:e.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary text-white flex items-center justify-center text-sm font-medium cursor-pointer hover:opacity-80 transition",children:i()}),children:[e.jsx(f,{to:"/",onClick:()=>{},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"w-4 h-4"}),"Go to Site"]})}),e.jsx("div",{className:"border-t border-gray-200 my-1"}),e.jsx(f,{onClick:x,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"w-4 h-4"}),"Logout"]})})]})]})]})}),e.jsx("main",{className:"p-4 md:p-6",children:e.jsx(w,{})})]})]})}export{X as default};

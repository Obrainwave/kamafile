import{j as e,g as E,a as H,r as p,b as O,c as V,s as W,d as w,e as $,f as L,m as q,h as T,u as U,B as y,L as k,C as _}from"./index-Cbyb3QEJ.js";import{H as J}from"./Header-DvcfjfrB.js";import{a as K}from"./api-DNw9fUFW.js";import{C as G}from"./Container-Dj81pQlh.js";import{C as Q,a as X}from"./CardContent-CdX6bcWm.js";import{P as Y}from"./PersonAdd-DvVsZC_z.js";import{c as z,u as Z,T as f,I as B}from"./Typography-BbJRQHXP.js";import{A as ee}from"./Alert-D651SN0P.js";import{S as oe}from"./Stack-BObcI8DA.js";import{T as C}from"./TextField-9A98RcdQ.js";import{I as D,V as F,a as N}from"./VisibilityOff-CkJXHA3S.js";import{S as te,F as se}from"./FormControlLabel-BLyZwIks.js";import{m as re}from"./Menu-BYYOoMan.js";import{B as ae}from"./Button-DiXL28Rt.js";import"./Logout-9QW3LrMU.js";import"./Slide-BhaRgSU9.js";import"./dividerClasses-CbVubQvl.js";import"./Toolbar-DCls9CGn.js";import"./Close-DMIYlVpK.js";const ne=z(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),ie=z(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),le=z(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function ce(o){return H("MuiCheckbox",o)}const I=E("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),de=o=>{const{classes:s,indeterminate:n,color:c,size:g}=o,h={root:["root",n&&"indeterminate",`color${w(c)}`,`size${w(g)}`]},i=$(h,ce,s);return{...s,...i}},pe=W(te,{shouldForwardProp:o=>L(o)||o==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:n}=o;return[s.root,n.indeterminate&&s.indeterminate,s[`size${w(n.size)}`],n.color!=="default"&&s[`color${w(n.color)}`]]}})(q(({theme:o})=>({color:(o.vars||o).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:o.alpha((o.vars||o).palette.action.active,(o.vars||o).palette.action.hoverOpacity)}}},...Object.entries(o.palette).filter(T()).map(([s])=>({props:{color:s,disableRipple:!1},style:{"&:hover":{backgroundColor:o.alpha((o.vars||o).palette[s].main,(o.vars||o).palette.action.hoverOpacity)}}})),...Object.entries(o.palette).filter(T()).map(([s])=>({props:{color:s},style:{[`&.${I.checked}, &.${I.indeterminate}`]:{color:(o.vars||o).palette[s].main},[`&.${I.disabled}`]:{color:(o.vars||o).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),me=e.jsx(ie,{}),ue=e.jsx(ne,{}),xe=e.jsx(le,{}),fe=p.forwardRef(function(s,n){const c=O({props:s,name:"MuiCheckbox"}),{checkedIcon:g=me,color:h="primary",icon:i=ue,indeterminate:t=!1,indeterminateIcon:j=xe,inputProps:v,size:a="medium",disableRipple:d=!1,className:P,slots:l={},slotProps:m={},...u}=c,x=t?j:i,r=t?j:g,b={...c,disableRipple:d,color:h,indeterminate:t,size:a},A=de(b),S=m.input??v,[R,M]=Z("root",{ref:n,elementType:pe,className:V(A.root,P),shouldForwardComponentProp:!0,externalForwardedProps:{slots:l,slotProps:m,...u},ownerState:b,additionalProps:{type:"checkbox",icon:p.cloneElement(x,{fontSize:x.props.fontSize??a}),checkedIcon:p.cloneElement(r,{fontSize:r.props.fontSize??a}),disableRipple:d,slots:l,slotProps:{input:re(typeof S=="function"?S(b):S,{"data-indeterminate":t})}}});return e.jsx(R,{...M,classes:A})});function Re(){const o=U(),[s,n]=p.useState(!1),[c,g]=p.useState(!1),[h,i]=p.useState(!1),[t,j]=p.useState({fullName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1}),[v,a]=p.useState(""),d=l=>{const m=l.target.type==="checkbox"?l.target.checked:l.target.value;j({...t,[l.target.name]:m}),a("")},P=async l=>{var m;if(l.preventDefault(),a(""),i(!0),!t.fullName||!t.email||!t.password||!t.confirmPassword){a("Please fill in all fields"),i(!1);return}if(t.password!==t.confirmPassword){a("Passwords do not match"),i(!1);return}if(t.password.length<8){a("Password must be at least 8 characters long"),i(!1);return}if(!t.acceptTerms){a("Please accept the terms and conditions"),i(!1);return}try{const u=await K.signup({email:t.email,full_name:t.fullName,password:t.password,confirm_password:t.confirmPassword});localStorage.setItem("access_token",u.access_token),localStorage.setItem("user",JSON.stringify(u.user)),window.dispatchEvent(new CustomEvent("auth-change")),o("/")}catch(u){let x="An error occurred. Please try again.";if((m=u.response)!=null&&m.data){const r=u.response.data;Array.isArray(r.detail)?x=r.detail.map(b=>b.msg).join(", "):typeof r.detail=="string"?x=r.detail:r.detail&&typeof r.detail=="object"&&(x=r.detail.msg||r.detail.message||JSON.stringify(r.detail))}a(x)}finally{i(!1)}};return e.jsxs(y,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",bgcolor:"background.default"},children:[e.jsx(J,{}),e.jsx(y,{sx:{flex:1,display:"flex",alignItems:"center",py:4},children:e.jsx(G,{maxWidth:"sm",children:e.jsx(Q,{elevation:3,children:e.jsxs(X,{sx:{p:4},children:[e.jsxs(y,{sx:{textAlign:"center",mb:4},children:[e.jsx(y,{sx:{width:64,height:64,borderRadius:"50%",bgcolor:"secondary.main",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2},children:e.jsx(Y,{sx:{fontSize:32,color:"white"}})}),e.jsx(f,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:700},children:"Create Account"}),e.jsx(f,{variant:"body2",color:"text.secondary",children:"Join Kamafile and simplify your taxes"})]}),v&&e.jsx(ee,{severity:"error",sx:{mb:3},children:v}),e.jsx(y,{component:"form",onSubmit:P,children:e.jsxs(oe,{spacing:3,children:[e.jsx(C,{fullWidth:!0,label:"Full Name",name:"fullName",type:"text",value:t.fullName,onChange:d,required:!0,autoComplete:"name",autoFocus:!0}),e.jsx(C,{fullWidth:!0,label:"Email address",name:"email",type:"email",value:t.email,onChange:d,required:!0,autoComplete:"email"}),e.jsx(C,{fullWidth:!0,label:"Password",name:"password",type:s?"text":"password",value:t.password,onChange:d,required:!0,autoComplete:"new-password",helperText:"Must be at least 8 characters",InputProps:{endAdornment:e.jsx(D,{position:"end",children:e.jsx(B,{onClick:()=>n(!s),edge:"end",children:s?e.jsx(F,{}):e.jsx(N,{})})})}}),e.jsx(C,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",type:c?"text":"password",value:t.confirmPassword,onChange:d,required:!0,autoComplete:"new-password",InputProps:{endAdornment:e.jsx(D,{position:"end",children:e.jsx(B,{onClick:()=>g(!c),edge:"end",children:c?e.jsx(F,{}):e.jsx(N,{})})})}}),e.jsx(se,{control:e.jsx(fe,{name:"acceptTerms",checked:t.acceptTerms,onChange:d,required:!0}),label:e.jsxs(f,{variant:"body2",children:["I agree to the"," ",e.jsx(k,{to:"/terms",style:{textDecoration:"none",color:"inherit"},children:e.jsx(f,{component:"span",variant:"body2",color:"primary",sx:{"&:hover":{textDecoration:"underline"}},children:"Terms and Conditions"})})," ","and"," ",e.jsx(k,{to:"/privacy",style:{textDecoration:"none",color:"inherit"},children:e.jsx(f,{component:"span",variant:"body2",color:"primary",sx:{"&:hover":{textDecoration:"underline"}},children:"Privacy Policy"})})]})}),e.jsx(ae,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:h,sx:{bgcolor:"secondary.main",py:1.5,fontSize:"1rem","&:hover":{bgcolor:"secondary.dark"}},children:h?e.jsx(_,{size:24,color:"inherit"}):"Create Account"}),e.jsx(y,{sx:{textAlign:"center",mt:2},children:e.jsxs(f,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",e.jsx(k,{to:"/signin",style:{textDecoration:"none",color:"inherit"},children:e.jsx(f,{component:"span",variant:"body2",color:"primary",sx:{fontWeight:600,"&:hover":{textDecoration:"underline"}},children:"Sign in"})})]})})]})})]})})})})]})}export{Re as default};

import{u as w,r as l,j as e,L as x,S as N}from"./index-CtZe0orJ.js";import{H as b}from"./Header-Axgyt5bx.js";import{a as v}from"./api-sa1Artjr.js";import{B as S}from"./Button-DSgQr6FG.js";import{I as C}from"./Input-DCDiL-_I.js";import{C as E,a as I}from"./Container-B1p7Csts.js";import{A as k}from"./Alert-DEvzc-ke.js";import{L as A}from"./lock-tUrUNkvu.js";import{E as P,a as L}from"./eye-pWNRRIMt.js";import"./DropdownItem-DL29CmMt.js";import"./menu-BZlBs3Vk.js";import"./createLucideIcon-BzLNr2Zq.js";import"./user-plus-C-B5qNsN.js";import"./x-kfxjC3rr.js";import"./circle-check-big-BXrFS2Xy.js";function T(){const f=w(),[n,h]=l.useState(!1),[d,m]=l.useState(!1),[a,g]=l.useState({email:"",password:""}),[c,r]=l.useState(""),p=i=>{g({...a,[i.target.name]:i.target.value}),r("")},j=async i=>{var u;if(i.preventDefault(),r(""),m(!0),!a.email||!a.password){r("Please fill in all fields"),m(!1);return}try{const t=await v.login({email:a.email,password:a.password});localStorage.setItem("access_token",t.access_token),localStorage.setItem("user",JSON.stringify(t.user)),window.dispatchEvent(new CustomEvent("auth-change")),f("/")}catch(t){let o="An error occurred. Please try again.";if((u=t.response)!=null&&u.data){const s=t.response.data;Array.isArray(s.detail)?o=s.detail.map(y=>y.msg).join(", "):typeof s.detail=="string"?o=s.detail:s.detail&&typeof s.detail=="object"&&(o=s.detail.msg||s.detail.message||JSON.stringify(s.detail))}r(o)}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[e.jsx(b,{}),e.jsx("div",{className:"flex-1 flex items-center py-16",children:e.jsx(E,{maxWidth:"sm",children:e.jsxs(I,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary flex items-center justify-center mx-auto mb-4",children:e.jsx(A,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Sign In"}),e.jsx("p",{className:"text-gray-600",children:"Welcome back to Kamafile"})]}),c&&e.jsx("div",{className:"mb-6",children:e.jsx(k,{severity:"error",children:c})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsx(C,{label:"Email address",name:"email",type:"email",value:a.email,onChange:p,required:!0,autoComplete:"email",autoFocus:!0}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:n?"text":"password",value:a.password,onChange:p,required:!0,autoComplete:"current-password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition pr-12"}),e.jsx("button",{type:"button",onClick:()=>h(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:n?e.jsx(P,{className:"w-5 h-5"}):e.jsx(L,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(x,{to:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})}),e.jsx(S,{type:"submit",fullWidth:!0,size:"lg",disabled:d,children:d?e.jsx(N,{size:"sm",className:"mx-auto"}):"Sign In"}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(x,{to:"/signup",className:"font-semibold text-primary hover:underline",children:"Sign up"})]})})]})]})})})]})}export{T as default};

import{u as S,r as d,j as e,B as o,L as f,C}from"./index-D8mN3p1X.js";import{H as I}from"./Header-CBt4IGXB.js";import{a as A}from"./api-Bu1cG_4Q.js";import{C as k}from"./Container-92ghf_aJ.js";import{C as D,a as P}from"./CardContent-CJC80oUx.js";import{L as W}from"./Lock-BQVmbsxD.js";import{T as a,I as B}from"./Typography-CfT4MDDf.js";import{A as E}from"./Alert-B-smGFDq.js";import{S as z}from"./Stack-BUiep6nA.js";import{T as g}from"./TextField-B__SUnjm.js";import{I as L,V as F,a as T}from"./VisibilityOff-BsmV7YbY.js";import{B as H}from"./Button-CJo_el1a.js";import"./Logout-BLxARsol.js";import"./Menu-IZ2QR1Rp.js";import"./Slide-DXFgg0J9.js";import"./dividerClasses-B2gYjZRc.js";import"./Toolbar-sv-8sTU6.js";import"./PersonAdd-DRtH8wvO.js";import"./Close-DH2AyJVu.js";function oe(){const y=S(),[c,j]=d.useState(!1),[p,m]=d.useState(!1),[r,b]=d.useState({email:"",password:""}),[x,i]=d.useState(""),u=n=>{b({...r,[n.target.name]:n.target.value}),i("")},v=async n=>{var h;if(n.preventDefault(),i(""),m(!0),!r.email||!r.password){i("Please fill in all fields"),m(!1);return}try{const s=await A.login({email:r.email,password:r.password});localStorage.setItem("access_token",s.access_token),localStorage.setItem("user",JSON.stringify(s.user)),window.dispatchEvent(new CustomEvent("auth-change")),y("/")}catch(s){let l="An error occurred. Please try again.";if((h=s.response)!=null&&h.data){const t=s.response.data;Array.isArray(t.detail)?l=t.detail.map(w=>w.msg).join(", "):typeof t.detail=="string"?l=t.detail:t.detail&&typeof t.detail=="object"&&(l=t.detail.msg||t.detail.message||JSON.stringify(t.detail))}i(l)}finally{m(!1)}};return e.jsxs(o,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",bgcolor:"background.default"},children:[e.jsx(I,{}),e.jsx(o,{sx:{flex:1,display:"flex",alignItems:"center",py:4},children:e.jsx(k,{maxWidth:"sm",children:e.jsx(D,{elevation:3,children:e.jsxs(P,{sx:{p:4},children:[e.jsxs(o,{sx:{textAlign:"center",mb:4},children:[e.jsx(o,{sx:{width:64,height:64,borderRadius:"50%",bgcolor:"primary.main",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2},children:e.jsx(W,{sx:{fontSize:32,color:"white"}})}),e.jsx(a,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:700},children:"Sign In"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Welcome back to Kamafile"})]}),x&&e.jsx(E,{severity:"error",sx:{mb:3},children:x}),e.jsx(o,{component:"form",onSubmit:v,children:e.jsxs(z,{spacing:3,children:[e.jsx(g,{fullWidth:!0,label:"Email address",name:"email",type:"email",value:r.email,onChange:u,required:!0,autoComplete:"email",autoFocus:!0}),e.jsx(g,{fullWidth:!0,label:"Password",name:"password",type:c?"text":"password",value:r.password,onChange:u,required:!0,autoComplete:"current-password",InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(B,{onClick:()=>j(!c),edge:"end",children:c?e.jsx(F,{}):e.jsx(T,{})})})}}),e.jsx(o,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(f,{to:"/forgot-password",style:{textDecoration:"none",color:"inherit",fontSize:"0.875rem"},children:e.jsx(a,{variant:"body2",color:"primary",sx:{"&:hover":{textDecoration:"underline"}},children:"Forgot password?"})})}),e.jsx(H,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:p,sx:{bgcolor:"primary.main",py:1.5,fontSize:"1rem","&:hover":{bgcolor:"primary.dark"}},children:p?e.jsx(C,{size:24,color:"inherit"}):"Sign In"}),e.jsx(o,{sx:{textAlign:"center",mt:2},children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Don't have an account?"," ",e.jsx(f,{to:"/signup",style:{textDecoration:"none",color:"inherit"},children:e.jsx(a,{component:"span",variant:"body2",color:"primary",sx:{fontWeight:600,"&:hover":{textDecoration:"underline"}},children:"Sign up"})})]})})]})})]})})})})]})}export{oe as default};

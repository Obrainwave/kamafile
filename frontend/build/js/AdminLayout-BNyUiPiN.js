import{r as d,u as g,a as w,j as e,S as y,O as N}from"./index-CtZe0orJ.js";import{a as j}from"./api-sa1Artjr.js";import{D as v,a as u}from"./DropdownItem-DL29CmMt.js";import{a as k,M as C,C as A,L as M}from"./menu-BZlBs3Vk.js";import{U as L}from"./users-0su11cMe.js";import{c as b}from"./createLucideIcon-BzLNr2Zq.js";import{F as S}from"./file-text-BdylwFzr.js";import{B as U}from"./bot-C-CwCToI.js";import{X as I}from"./x-kfxjC3rr.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],z=b("chart-column",_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],E=b("settings",D);function O(){const[c,o]=d.useState(null),[h,m]=d.useState(!0),[s,x]=d.useState(!1),r=g();d.useEffect(()=>{p()},[]);const p=async()=>{try{const i=await j.getCurrentUser();o(i);const t=["admin","super_admin","moderator","support"];i.role&&t.includes(i.role)?x(!0):r("/")}catch{r("/signin")}finally{m(!1)}};return{user:c,loading:h,isAdmin:s}}const f=[{text:"Dashboard",icon:k,path:"/admin"},{text:"Users",icon:L,path:"/admin/users"},{text:"Analytics",icon:z,path:"/admin/analytics"},{text:"Content",icon:S,path:"/admin/content"},{text:"RAG Management",icon:U,path:"/admin/rag"},{text:"Settings",icon:E,path:"/admin/settings"}];function X(){const c=g(),o=w(),{loading:h,isAdmin:m,user:s}=O(),[x,r]=d.useState(!1),p=async()=>{try{await j.logout(),c("/signin")}catch{}};if(h)return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(y,{size:"lg"})});if(!m)return null;const i=()=>{var t,l,a,n;return((l=(t=s==null?void 0:s.full_name)==null?void 0:t[0])==null?void 0:l.toUpperCase())||((n=(a=s==null?void 0:s.email)==null?void 0:a[0])==null?void 0:n.toUpperCase())||"A"};return e.jsxs("div",{className:"flex min-h-screen w-full max-w-full overflow-x-hidden",children:[e.jsxs("aside",{className:"hidden md:block fixed left-0 top-0 h-full w-60 text-white z-30",style:{backgroundColor:"#0f1419"},children:[e.jsx("div",{className:"h-16 flex items-center px-6 border-b border-white/10",children:e.jsx("h2",{className:"text-lg font-bold",children:"Admin Panel"})}),e.jsx("nav",{className:"py-4",children:f.map(t=>{const l=t.icon,a=o.pathname===t.path||t.path!=="/admin"&&o.pathname.startsWith(t.path);return e.jsxs("button",{onClick:()=>c(t.path),className:`w-full flex items-center gap-3 px-6 py-3 text-left transition ${a?"text-white":"text-white/70 hover:bg-white/10 hover:text-white"}`,style:a?{backgroundColor:"#1a2332"}:{},onMouseEnter:n=>{a||(n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:n=>{a||(n.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(l,{className:"w-5 h-5"}),e.jsx("span",{children:t.text})]},t.text)})})]}),x&&e.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>r(!1)}),e.jsxs("div",{className:"fixed left-0 top-0 h-full w-60 text-white",style:{backgroundColor:"#0f1419"},children:[e.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-white/10",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Admin Panel"}),e.jsx("button",{onClick:()=>r(!1),className:"text-white",children:e.jsx(I,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"py-4",children:f.map(t=>{const l=t.icon,a=o.pathname===t.path||t.path!=="/admin"&&o.pathname.startsWith(t.path);return e.jsxs("button",{onClick:()=>{c(t.path),r(!1)},className:`w-full flex items-center gap-3 px-6 py-3 text-left transition ${a?"text-white":"text-white/70 hover:bg-white/10 hover:text-white"}`,style:a?{backgroundColor:"#1a2332"}:{},onMouseEnter:n=>{a||(n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:n=>{a||(n.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(l,{className:"w-5 h-5"}),e.jsx("span",{children:t.text})]},t.text)})})]})]}),e.jsxs("div",{className:"flex-1 md:ml-60 w-full max-w-full overflow-x-hidden min-w-0",children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b border-gray-200 shadow-sm",children:e.jsxs("div",{className:"h-16 flex items-center justify-between px-4 md:px-6",children:[e.jsx("button",{onClick:()=>r(!0),className:"md:hidden p-2 text-gray-700",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"hidden sm:block text-sm text-gray-600",children:(s==null?void 0:s.full_name)||(s==null?void 0:s.email)}),e.jsxs(v,{trigger:e.jsx("div",{className:"w-8 h-8 rounded-full text-white flex items-center justify-center text-sm font-medium cursor-pointer hover:opacity-80 transition",style:{backgroundColor:"#4caf50"},children:i()}),children:[e.jsx(u,{to:"/",onClick:()=>{},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"w-4 h-4"}),"Go to Site"]})}),e.jsx("div",{className:"border-t border-gray-200 my-1"}),e.jsx(u,{onClick:p,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"w-4 h-4"}),"Logout"]})})]})]})]})}),e.jsx("main",{className:"p-4 md:p-6 overflow-x-hidden max-w-full",children:e.jsx(N,{})})]})]})}export{X as default};

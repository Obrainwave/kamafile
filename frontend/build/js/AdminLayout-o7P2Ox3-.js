import{j as t,r as o,u as I,l as M,B as l,C as S,n as T,O as z}from"./index-D8mN3p1X.js";import{a as L}from"./api-Bu1cG_4Q.js";import{b as D,A as k,c as B,d as P,L as U,e as W,a as E,D as O}from"./Logout-BLxARsol.js";import{T as v,M as A}from"./Toolbar-sv-8sTU6.js";import{c as w,T as g,I as H}from"./Typography-CfT4MDDf.js";import{A as G,D as C}from"./Slide-DXFgg0J9.js";import{M as R,L as _}from"./Menu-IZ2QR1Rp.js";import{L as V,D as $}from"./Description-DSFTc1fz.js";import{P as N}from"./People-Bjqi9Rg9.js";import{S as q}from"./SmartToy-C2qTJqR6.js";import"./dividerClasses-B2gYjZRc.js";const F=w(t.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"})),J=w(t.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}));function K(){const[r,i]=o.useState(null),[m,h]=o.useState(!0),[n,c]=o.useState(!1),a=I();o.useEffect(()=>{x()},[]);const x=async()=>{try{const e=await L.getCurrentUser();i(e);const p=["admin","super_admin","moderator","support"];e.role&&p.includes(e.role)?c(!0):a("/")}catch{a("/signin")}finally{h(!1)}};return{user:r,loading:m,isAdmin:n}}const d=240,Q=[{text:"Dashboard",icon:t.jsx(O,{}),path:"/admin"},{text:"Users",icon:t.jsx(N,{}),path:"/admin/users"},{text:"Analytics",icon:t.jsx(F,{}),path:"/admin/analytics"},{text:"Content",icon:t.jsx($,{}),path:"/admin/content"},{text:"RAG Management",icon:t.jsx(q,{}),path:"/admin/rag"},{text:"Settings",icon:t.jsx(J,{}),path:"/admin/settings"}];function ct(){var j,f,y,b;const r=I(),i=M(),{loading:m,isAdmin:h,user:n}=K(),[c,a]=o.useState(null),x=s=>{a(s.currentTarget)},e=()=>{a(null)},p=async()=>{try{await L.logout(),r("/signin")}catch{}e()};return m?t.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:t.jsx(S,{})}):h?t.jsxs(l,{sx:{display:"flex",minHeight:"100vh"},children:[t.jsx(T,{}),t.jsx(D,{position:"fixed",sx:{width:{sm:`calc(100% - ${d}px)`},ml:{sm:`${d}px`},zIndex:s=>s.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",boxShadow:1},children:t.jsxs(v,{sx:{justifyContent:"space-between"},children:[t.jsx(g,{variant:"h6",noWrap:!0,component:"div",fontWeight:"bold",children:"Admin Dashboard"}),t.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsx(g,{variant:"body2",sx:{display:{xs:"none",sm:"block"}},children:(n==null?void 0:n.full_name)||(n==null?void 0:n.email)}),t.jsx(H,{size:"large",edge:"end",onClick:x,color:"inherit",children:t.jsx(G,{sx:{width:32,height:32,bgcolor:"secondary.main"},children:((f=(j=n==null?void 0:n.full_name)==null?void 0:j[0])==null?void 0:f.toUpperCase())||((b=(y=n==null?void 0:n.email)==null?void 0:y[0])==null?void 0:b.toUpperCase())||"A"})}),t.jsxs(R,{anchorEl:c,open:!!c,onClose:e,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[t.jsxs(A,{onClick:()=>{r("/"),e()},children:[t.jsx(k,{sx:{mr:1}}),"Go to Site"]}),t.jsx(C,{}),t.jsxs(A,{onClick:p,children:[t.jsx(B,{sx:{mr:1}}),"Logout"]})]})]})]})}),t.jsxs(P,{variant:"permanent",sx:{width:d,flexShrink:0,"& .MuiDrawer-paper":{width:d,boxSizing:"border-box",bgcolor:"primary.dark",color:"primary.contrastText"}},children:[t.jsx(v,{children:t.jsx(g,{variant:"h6",noWrap:!0,component:"div",fontWeight:"bold",color:"inherit",children:"Admin Panel"})}),t.jsx(C,{sx:{bgcolor:"rgba(255, 255, 255, 0.12)"}}),t.jsx(_,{children:Q.map(s=>{const u=i.pathname===s.path||s.path!=="/admin"&&i.pathname.startsWith(s.path);return t.jsx(U,{disablePadding:!0,children:t.jsxs(W,{onClick:()=>r(s.path),selected:u,sx:{color:"primary.contrastText","&:hover":{bgcolor:"rgba(255, 255, 255, 0.08)"},"&.Mui-selected":{bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.main"}}},children:[t.jsx(V,{sx:{color:"primary.contrastText",opacity:u?1:.7},children:s.icon}),t.jsx(E,{primary:s.text})]})},s.text)})})]}),t.jsx(l,{component:"main",sx:{flexGrow:1,p:3,mt:8},children:t.jsx(z,{})})]}):null}export{ct as default};

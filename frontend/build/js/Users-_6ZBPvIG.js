import{r,j as e,S as T}from"./index-DxCgcyXh.js";import{a as y}from"./adminAPI-pCiTY4we.js";import{C as z,a as N}from"./Container-D9tpSCKj.js";import{A as R}from"./Alert-BVCwHu8U.js";import{I as w}from"./Input-oAjqnN_f.js";import{B as p}from"./Button-DP5zKp_w.js";import{M as B}from"./Modal-jLw6kHFP.js";import{D as L,a as _}from"./DropdownItem-DyV-dnai.js";import{S as V}from"./search-C_fc-lbx.js";import{S as O}from"./square-pen-BE1AZXor.js";import{T as $}from"./trash-2-DMBNHSRv.js";import{c as q}from"./createLucideIcon-Dr0X7DXv.js";import"./api-sa1Artjr.js";import"./circle-check-big-9x3cbfmd.js";import"./x-CZXEUpxe.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],G=q("ellipsis-vertical",W);function ce(){const[k,S]=r.useState([]),[C,f]=r.useState(!0),[j,o]=r.useState(null),[i,u]=r.useState(0),[c,U]=r.useState(25),[h,E]=r.useState(0),[x,D]=r.useState(""),[a,A]=r.useState(null),[M,m]=r.useState(!1),[t,d]=r.useState({});r.useEffect(()=>{g()},[i,c,x]);const g=async()=>{var s,l;try{f(!0),o(null);const n={skip:i*c,limit:c};x&&(n.search=x);const b=await y.getUsers(n);S(b),E(b.length)}catch(n){o(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.detail)||"Failed to load users")}finally{f(!1)}},v=()=>{A(null)},P=()=>{a&&(d({full_name:a.full_name,phone_number:a.phone_number,user_type:a.user_type,is_active:a.is_active,is_verified:a.is_verified,role:a.role}),m(!0)),v()},I=async()=>{var s,l;if(a)try{await y.updateUser(a.id,t),m(!1),g()}catch(n){o(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.detail)||"Failed to update user")}},F=async()=>{var s,l;if(a&&window.confirm("Are you sure you want to delete this user?"))try{await y.deleteUser(a.id),v(),g()}catch(n){o(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.detail)||"Failed to delete user")}};return e.jsxs(z,{maxWidth:"xl",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage users and their permissions"})]})}),j&&e.jsx(R,{severity:"error",className:"mb-4",onClose:()=>o(null),children:j}),e.jsx(N,{className:"p-4 mb-4",children:e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users by name, email, or phone...",value:x,onChange:s=>D(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none"})]})})}),e.jsx(N,{className:"overflow-hidden",children:C?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(T,{size:"lg"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.full_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.phone_number||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded border border-gray-300 text-gray-700",children:s.user_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${s.role==="admin"||s.role==="super_admin"?"bg-primary text-white":"bg-gray-100 text-gray-700"}`,children:s.role||"user"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${s.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.is_active?"Active":"Inactive"}),s.is_verified&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-700",children:"Verified"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs(L,{trigger:e.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(G,{className:"w-5 h-5"})}),children:[e.jsx(_,{onClick:P,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"w-4 h-4"}),"Edit"]})}),e.jsx("div",{className:"border-t border-gray-200 my-1"}),e.jsx(_,{onClick:F,children:e.jsxs("div",{className:"flex items-center gap-3 text-red-600",children:[e.jsx($,{className:"w-4 h-4"}),"Delete"]})})]})})]},s.id))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",i*c+1," to ",Math.min((i+1)*c,h)," of ",h," users"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:c,onChange:s=>{U(parseInt(s.target.value,10)),u(0)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>u(Math.max(0,i-1)),disabled:i===0,children:"Previous"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>u(i+1),disabled:(i+1)*c>=h,children:"Next"})]})]})]})]})}),e.jsx(B,{open:M,onClose:()=>m(!1),title:"Edit User",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{label:"Full Name",value:t.full_name||"",onChange:s=>d({...t,full_name:s.target.value})}),e.jsx(w,{label:"Phone Number",value:t.phone_number||"",onChange:s=>d({...t,phone_number:s.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User Type"}),e.jsxs("select",{value:t.user_type||"",onChange:s=>d({...t,user_type:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none",children:[e.jsx("option",{value:"individual",children:"Individual"}),e.jsx("option",{value:"freelancer",children:"Freelancer"}),e.jsx("option",{value:"micro_business",children:"Micro Business"}),e.jsx("option",{value:"sme",children:"SME"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("select",{value:t.role||"user",onChange:s=>d({...t,role:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"support",children:"Support"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.is_active??!0,onChange:s=>d({...t,is_active:s.target.checked}),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.is_verified??!1,onChange:s=>d({...t,is_verified:s.target.checked}),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Verified"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(p,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(p,{variant:"primary",onClick:I,children:"Save"})]})]})})]})}export{ce as default};
